<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin – AJE Coins</title>
<link rel="stylesheet" href="usuario.css"/>
<script type="module" src="admin.js"></script>
</head>

<body>

<header class="topBar">
  <img src="assets/logo.png" class="logo">
  <span>Panel Administrativo – AJE Coins</span>
</header>

<main class="main-container">

  <section class="card">
    <h2>Carga de Información</h2>
    <div class="filtros">
      <div style="flex:1;">
        <label><strong>Usuarios (CSV):</strong></label>
        <input type="file" id="fileInput" accept=".csv"/>
        <button id="uploadBtn">Cargar Usuarios</button>
      </div>
      <div style="flex:1;">
        <label><strong>Productos (CSV):</strong></label>
        <input type="file" id="productFileInput" accept=".csv"/>
        <button id="uploadProductBtn">Cargar Productos</button>
      </div>
    </div>
  </section>

  <section class="card">
    <h2>Inventario de Productos</h2>
    <div style="overflow-x:auto;">
      <table id="productsTable" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #007a5a; color: white;">
            <th style="padding: 10px; text-align: left;">Producto</th>
            <th style="padding: 10px; text-align: center;">Imagen</th>
            <th style="padding: 10px; text-align: center;">Coins</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <section class="card">
    <h2>Gestión de Usuarios (Lista Maestra)</h2>
    <p style="font-size: 12px; color: #666; margin-bottom: 15px;">
      Eliminar a un usuario aquí borrará su acceso y todos sus coins registrados permanentemente.
    </p>
    <div style="overflow-x:auto;">
      <table id="tablaMaestraUsuarios" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #007a5a; color: white;">
            <th style="padding: 10px; text-align: left;">Código Vendedor</th>
            <th style="padding: 10px; text-align: left;">Nombre Completo</th>
            <th style="padding: 10px; text-align: left;">CEDIS</th>
            <th style="padding: 10px; text-align: center;">Acción</th>
          </tr>
        </thead>
        <tbody id="maestraBody"></tbody>
      </table>
    </div>
  </section>

  <section class="card">
    <h2>Historial de Cargas de Coins</h2>
    <div class="filtros">
      <input type="date" id="filtroFecha"/>
      <button id="btnFiltrar">Filtrar por Fecha</button>
      <button id="btnVerTodo">Ver Todo</button>
      <button id="btnExportUsers">Exportar CSV</button>
    </div>
    <div style="overflow-x:auto;">
      <table id="usersTable" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #007a5a; color: white;">
            <th style="padding: 10px; text-align: left;">Fecha Carga</th>
            <th style="padding: 10px; text-align: left;">Código Vendedor</th>
            <th style="padding: 10px; text-align: left;">Nombre</th>
            <th style="padding: 10px; text-align: center;">Coins Cargados</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <section class="card">
    <h2>Historial de Canjes <button id="btnExport" style="float:right; font-size:12px;">Exportar CSV</button></h2>
    <div style="overflow-x:auto;">
      <table id="comprasTable" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #007a5a; color: white;">
            <th style="padding: 10px; text-align: left;">Fecha/Hora</th>
            <th style="padding: 10px; text-align: left;">Código Vendedor</th>
            <th style="padding: 10px; text-align: left;">Nombre</th>
            <th style="padding: 10px; text-align: left;">Productos</th>
            <th style="padding: 10px; text-align: center;">Total</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <section class="card">
    <h2>Consulta de Movimientos por Vendedor</h2>
    <div class="filtros">
      <input type="text" id="movCedula" placeholder="Código de Vendedor..."/>
      <button id="btnVerMov">Ver Historial</button>
      <button id="btnVerTodosMov">Ver Todos</button>
      <button id="btnExportMov">Exportar</button>
    </div>
    <div style="overflow-x:auto;">
      <table id="movTable" style="width:100%; border-collapse: collapse;">
        <thead>
          <tr style="background-color: #007a5a; color: white;">
            <th style="padding: 10px; text-align: left;">Código</th>
            <th style="padding: 10px; text-align: left;">Nombre</th>
            <th style="padding: 10px; text-align: left;">Fecha</th>
            <th style="padding: 10px; text-align: left;">Concepto</th>
            <th style="padding: 10px; text-align: center;">Coins</th>
            <th style="padding: 10px; text-align: center;">Saldo</th>
          </tr>
        </thead>
        <tbody id="movBody"></tbody>
      </table>
    </div>
  </section>

</main>

<div id="loader" class="loader hidden">
  <div class="spinner"></div>
  <p>Procesando información...</p>
</div>

</body>
</html>
