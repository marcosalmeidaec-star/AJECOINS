<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>AJE Coins</title>

<link rel="stylesheet" href="usuario.css"/>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script type="text/javascript">
   (function(){
      // InicializaciÃ³n con tu Public Key
      emailjs.init("9ynguWEQzb63q7ITx");
   })();
</script>

<script src="usuario.js" defer></script>
</head>
<body>

<header class="topBar">
  <img src="assets/logo.png" class="logo">
  <span>AJE Coins</span>
</header>

<section id="login" class="card">
  <h2>Ingresa</h2>

  <input id="cedulaInput" type="text" placeholder="CÃ³digo de Vendedor" maxlength="10">
  <input id="passwordInput" type="password" placeholder="ContraseÃ±a">

  <button id="ingresarBtn">Entrar</button>
  
  <p style="text-align:center; margin-top:15px;">
    <a href="#" id="olvideLink" style="color:#007a5a; font-size:14px; text-decoration:none; font-weight:bold;">Â¿Olvidaste tu contraseÃ±a?</a>
  </p>

  <p id="errorMsg" class="error"></p>

  <p style="font-size:12px;color:#777;text-align:center; margin-top:10px;">
    Tu contraseÃ±a inicial es tu cÃ³digo de vendedor
  </p>
</section>

<section id="cuenta" class="card hidden">

  <div class="saldoHead">
    <span>Mis coins</span>
    <strong id="coins">0</strong>
  </div>

  <ul id="datos" class="datos"></ul>

  <div class="passwordBox">
    <h4>ğŸ” Seguridad</h4>
    <button id="btnCambiarPass">Cambiar contraseÃ±a manualmente</button>
  </div>

  <h3>Tienda</h3>
  <div id="productosTienda" class="tienda"></div>

  <h3>Carrito <span id="bolsa">0</span></h3>
  <ul id="carritoList" class="carrito"></ul>

  <button id="cerrarBtn" style="margin-top: 20px;">Cerrar sesiÃ³n</button>

  <hr style="margin: 25px 0; border: 0; border-top: 1px solid #eee;">

  <h3>Mis Movimientos</h3>
  <div style="overflow-x:auto;">
    <table id="tablaMovimientosUsuario" style="width:100%; border-collapse: collapse; font-size: 13px;">
      <thead>
        <tr style="background-color: #007a5a; color: white;">
          <th style="padding: 10px; text-align: left;">Fecha</th>
          <th style="padding: 10px; text-align: left;">Concepto</th>
          <th style="padding: 10px; text-align: center;">Coins</th>
          <th style="padding: 10px; text-align: center;">Saldo</th>
        </tr>
      </thead>
      <tbody id="movimientosBody">
        </tbody>
    </table>
  </div>

</section>

<div id="modalCorreo" class="modal hidden">
  <div class="modal-content">
    <h4>ğŸ“§ Registro de Correo</h4>
    <p style="font-size:13px; color:#666;">Por favor, registra un correo para poder recuperar tu cuenta en caso de olvido.</p>
    <input type="email" id="emailRegistroInput" placeholder="tu@correo.com">
    <button id="btnGuardarEmail">Guardar y Continuar</button>
  </div>
</div>

<div id="modalRecuperar" class="modal hidden">
  <div class="modal-content">
    <h4 id="tituloRecuperar">Recuperar Acceso</h4>
    <div id="step1Recuperar">
      <input type="text" id="codRecuperar" placeholder="CÃ³digo de Vendedor">
      <input type="email" id="emailRecuperar" placeholder="Correo electrÃ³nico">
      <button id="btnEnviarCodigo">Enviar CÃ³digo</button>
    </div>
    <div id="step2Recuperar" class="hidden">
      <input type="text" id="codigoVerificacionInput" placeholder="CÃ³digo de 6 dÃ­gitos">
      <input type="password" id="nuevaPassInput" placeholder="Nueva ContraseÃ±a">
      <button id="btnRestablecer">Restablecer ContraseÃ±a</button>
    </div>
    <button class="sec" id="btnCerrarRecuperar" style="margin-top:10px;">Cancelar</button>
  </div>
</div>

<div id="modalFin" class="modal hidden">
  <div class="modal-content">
    <h4>Resumen de Pedido</h4>
    <ul id="resumenList"></ul>
    <p id="totalFin" style="font-weight:bold;"></p>
    <button id="btnConfirmar">Confirmar Canje</button>
    <button id="btnCancelar" class="sec">Volver</button>
  </div>
</div>

<div id="loader" class="loader">
  <div class="spinner"></div>
  <p>Procesandoâ€¦</p>
</div>

</body>
</html>
